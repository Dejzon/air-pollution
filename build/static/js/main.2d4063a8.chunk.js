(this["webpackJsonpfirebase-react-auth"]=this["webpackJsonpfirebase-react-auth"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),l=a.n(r),o=a(6),s=a.n(o),u=a(10),i=a(5),m=a(110),E=a(57),p=a.n(E),d=(a(75),p.a.initializeApp({apiKey:"AIzaSyBi4KkmqQPtTNlwtHA_DUP3T2UXmWMCkJQ",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_APP_ID:"1:796080668558:web:8ab2635b07eaf1b439eedf",REACT_APP_AUTH_DOMAIN:"auth-hooks-dev-3ac29.firebaseapp.com",REACT_APP_DATABASE_URL:"https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyBi4KkmqQPtTNlwtHA_DUP3T2UXmWMCkJQ",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs",REACT_APP_MESAGGING_SENDER_ID:"796080668558",REACT_APP_OPENWEATHER_API_KEY:"8fd8cd4cfceeb698eef7a7cd4ea325cc",REACT_APP_PROJECT_ID:"auth-hooks-dev-3ac29",REACT_APP_STORAGE_BUCKET:"auth-hooks-dev-3ac29.appspot.com"}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_APP_ID:"1:796080668558:web:8ab2635b07eaf1b439eedf",REACT_APP_AUTH_DOMAIN:"auth-hooks-dev-3ac29.firebaseapp.com",REACT_APP_DATABASE_URL:"https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyBi4KkmqQPtTNlwtHA_DUP3T2UXmWMCkJQ",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs",REACT_APP_MESAGGING_SENDER_ID:"796080668558",REACT_APP_OPENWEATHER_API_KEY:"8fd8cd4cfceeb698eef7a7cd4ea325cc",REACT_APP_PROJECT_ID:"auth-hooks-dev-3ac29",REACT_APP_STORAGE_BUCKET:"auth-hooks-dev-3ac29.appspot.com"}).REACT_APP_FIREBASE_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_APP_ID:"1:796080668558:web:8ab2635b07eaf1b439eedf",REACT_APP_AUTH_DOMAIN:"auth-hooks-dev-3ac29.firebaseapp.com",REACT_APP_DATABASE_URL:"https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyBi4KkmqQPtTNlwtHA_DUP3T2UXmWMCkJQ",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs",REACT_APP_MESAGGING_SENDER_ID:"796080668558",REACT_APP_OPENWEATHER_API_KEY:"8fd8cd4cfceeb698eef7a7cd4ea325cc",REACT_APP_PROJECT_ID:"auth-hooks-dev-3ac29",REACT_APP_STORAGE_BUCKET:"auth-hooks-dev-3ac29.appspot.com"}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_APP_ID:"1:796080668558:web:8ab2635b07eaf1b439eedf",REACT_APP_AUTH_DOMAIN:"auth-hooks-dev-3ac29.firebaseapp.com",REACT_APP_DATABASE_URL:"https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyBi4KkmqQPtTNlwtHA_DUP3T2UXmWMCkJQ",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs",REACT_APP_MESAGGING_SENDER_ID:"796080668558",REACT_APP_OPENWEATHER_API_KEY:"8fd8cd4cfceeb698eef7a7cd4ea325cc",REACT_APP_PROJECT_ID:"auth-hooks-dev-3ac29",REACT_APP_STORAGE_BUCKET:"auth-hooks-dev-3ac29.appspot.com"}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_APP_ID:"1:796080668558:web:8ab2635b07eaf1b439eedf",REACT_APP_AUTH_DOMAIN:"auth-hooks-dev-3ac29.firebaseapp.com",REACT_APP_DATABASE_URL:"https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyBi4KkmqQPtTNlwtHA_DUP3T2UXmWMCkJQ",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs",REACT_APP_MESAGGING_SENDER_ID:"796080668558",REACT_APP_OPENWEATHER_API_KEY:"8fd8cd4cfceeb698eef7a7cd4ea325cc",REACT_APP_PROJECT_ID:"auth-hooks-dev-3ac29",REACT_APP_STORAGE_BUCKET:"auth-hooks-dev-3ac29.appspot.com"}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_APP_ID:"1:796080668558:web:8ab2635b07eaf1b439eedf",REACT_APP_AUTH_DOMAIN:"auth-hooks-dev-3ac29.firebaseapp.com",REACT_APP_DATABASE_URL:"https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_API_KEY:"AIzaSyBi4KkmqQPtTNlwtHA_DUP3T2UXmWMCkJQ",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs",REACT_APP_MESAGGING_SENDER_ID:"796080668558",REACT_APP_OPENWEATHER_API_KEY:"8fd8cd4cfceeb698eef7a7cd4ea325cc",REACT_APP_PROJECT_ID:"auth-hooks-dev-3ac29",REACT_APP_STORAGE_BUCKET:"auth-hooks-dev-3ac29.appspot.com"}).REACT_APP_FIREBASE_APP_ID})),_=d.auth(),f=c.a.createContext();function b(){return Object(n.useContext)(f)}function A(e){var t=e.children,a=Object(n.useState)(),r=Object(i.a)(a,2),l=r[0],o=r[1],s=Object(n.useState)(!0),u=Object(i.a)(s,2),m=u[0],E=u[1];Object(n.useEffect)((function(){return _.onAuthStateChanged((function(e){o(e),E(!1)}))}),[]);var p={currentUser:l,login:function(e,t){return _.signInWithEmailAndPassword(e,t)},signup:function(e,t){return _.createUserWithEmailAndPassword(e,t)},logout:function(){return _.signOut()},resetPassword:function(e){return _.sendPasswordResetEmail(e)},updateEmail:function(e){return l.updateEmail(e)},updatePassword:function(e){return l.updatePassword(e)}};return c.a.createElement(f.Provider,{value:p},!m&&t)}var P=a(7),h=a(8),v=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=(a[0],a[1]),l=b(),o=(l.currentUser,l.logout),E=Object(P.g)();function p(){return(p=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),e.prev=1,e.next=4,o();case 4:E.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return c.a.createElement(m.a,{expand:"lg mb-5"},c.a.createElement(m.a.Brand,null," ",c.a.createElement(h.b,{exact:"true",to:"/"},"Air App")),c.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(h.b,{className:"nav-link",exact:"true",to:"/"},"Current Air"),c.a.createElement(h.b,{className:"nav-link",exact:"true",to:"/posts"},"Posts"),c.a.createElement(h.b,{className:"nav-link",exact:"true",to:"/update-profile"},"Update Profile"),c.a.createElement(h.b,{className:"nav-link",exact:"true",onClick:function(){return p.apply(this,arguments)}},"  Log Out")))},O=a(111),g=a(112),T=a(109),C=a(105);function S(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),r=b(),l=r.currentUser,o=r.updatePassword,s=r.updateEmail,u=Object(n.useState)(""),m=Object(i.a)(u,2),E=m[0],p=m[1],d=Object(n.useState)(!1),_=Object(i.a)(d,2),f=_[0],A=_[1],v=Object(P.g)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,null,c.a.createElement(O.a.Body,null,c.a.createElement("h2",{className:"text-center mb-4"},"Update Profile"),E&&c.a.createElement(g.a,{variant:"danger"},E),c.a.createElement(T.a,{onSubmit:function(n){if(n.preventDefault(),t.current.value!==a.current.value)return p("Passwords do not match");var c=[];A(!0),p(""),e.current.value!==l.email&&c.push(s(e.current.value)),t.current.value&&c.push(o(t.current.value)),Promise.all(c).then((function(){v.push("/")})).catch((function(){p("Failed to update account")})).finally((function(){A(!1)}))}},c.a.createElement(T.a.Group,{id:"email"},c.a.createElement(T.a.Label,null,"Email"),c.a.createElement(T.a.Control,{type:"email",ref:e,required:!0,defaultValue:l.email})),c.a.createElement(T.a.Group,{id:"password"},c.a.createElement(T.a.Label,null,"Password"),c.a.createElement(T.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})),c.a.createElement(T.a.Group,{id:"password-confirm"},c.a.createElement(T.a.Label,null,"Password Confirmation"),c.a.createElement(T.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the same"})),c.a.createElement(C.a,{disabled:f,className:"w-100",type:"submit"},"Update")),c.a.createElement("div",{className:"w-100 text-center mt-2"},c.a.createElement(h.b,{to:"/"},"Cancel")))))}function R(){var e=Object(n.useRef)(),t=b().resetPassword,a=Object(n.useState)(""),r=Object(i.a)(a,2),l=r[0],o=r[1],m=Object(n.useState)(""),E=Object(i.a)(m,2),p=E[0],d=E[1],_=Object(n.useState)(!1),f=Object(i.a)(_,2),A=f[0],P=f[1];function v(){return(v=Object(u.a)(s.a.mark((function a(n){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,d(""),o(""),P(!0),a.next=7,t(e.current.value);case 7:d("Check your inbox for further instructions"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),o("Failed to reset password");case 13:P(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,null,c.a.createElement(O.a.Body,null,c.a.createElement("h2",{className:"text-center mb-4"},"Password Reset"),l&&c.a.createElement(g.a,{variant:"danger"},l),p&&c.a.createElement(g.a,{variant:"success"},p),c.a.createElement(T.a,{onSubmit:function(e){return v.apply(this,arguments)}},c.a.createElement(T.a.Group,{id:"email"},c.a.createElement(T.a.Label,null,"Email"),c.a.createElement(T.a.Control,{type:"email",ref:e,required:!0})),c.a.createElement(C.a,{disabled:A,className:"w-100",type:"submit"},"Reset Password")),c.a.createElement("div",{className:"w-100 text-center mt-3"},c.a.createElement(h.b,{to:"/login"},"Login")))),c.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",c.a.createElement(h.b,{to:"/signup"},"Sign Up")))}function k(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=b().login,r=Object(n.useState)(""),l=Object(i.a)(r,2),o=l[0],m=l[1],E=Object(n.useState)(!1),p=Object(i.a)(E,2),d=p[0],_=p[1],f=Object(P.g)();function A(){return(A=Object(u.a)(s.a.mark((function n(c){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),n.prev=1,m(""),_(!0),n.next=6,a(e.current.value,t.current.value);case 6:f.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),m("Failed to log in");case 12:_(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return c.a.createElement("div",{className:"full-screen"},c.a.createElement(O.a,null,c.a.createElement(O.a.Body,null,c.a.createElement("h2",{className:"text-center mb-4"},"Log In"),o&&c.a.createElement(g.a,{variant:"danger"},o),c.a.createElement(T.a,{onSubmit:function(e){return A.apply(this,arguments)}},c.a.createElement(T.a.Group,{id:"email"},c.a.createElement(T.a.Label,null,"Email"),c.a.createElement(T.a.Control,{type:"email",ref:e,required:!0})),c.a.createElement(T.a.Group,{id:"password"},c.a.createElement(T.a.Label,null,"Password"),c.a.createElement(T.a.Control,{type:"password",ref:t,required:!0})),c.a.createElement(C.a,{disabled:d,className:"w-100",type:"submit"},"Log In")),c.a.createElement("div",{className:"w-100 text-center mt-3"},c.a.createElement(h.b,{to:"/forgot-password"},"Forgot Password?"))),c.a.createElement("div",{className:"w-100 text-center mt-2 mb-3"},"Need an account? ",c.a.createElement(h.b,{to:"/signup"},"Sign Up"))))}var I=a(106),N=a(61),j=a.n(N),D=a(62),w=a.n(D);function y(){return c.a.createElement(I.a,{className:"post"},c.a.createElement("div",{className:"img-text mb-5"},c.a.createElement("h2",null,"How does air pollution affect us?"),c.a.createElement("img",{src:j.a,alt:"citizens_masks"}),c.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque explicabo aspernatur delectus voluptate, nesciunt quibusdam ab reprehenderit, non et temporibus. Aut commodi, voluptates nulla deleniti pariatur vitae vel eos sit asperiores aliquid, molestiae recusandae placeat corporis earum assumenda dolorem! Earum necessitatibus tempora enim nisi officiis in. Ducimus illo placeat eveniet."),c.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque explicabo aspernatur delectus voluptate, nesciunt quibusdam ab reprehenderit, non et temporibus. Aut commodi, voluptates nulla deleniti pariatur vitae vel eos sit asperiores aliquid, molestiae recusandae placeat corporis earum assumenda dolorem! Earum necessitatibus tempora enim nisi officiis in. Ducimus illo placeat eveniet.")),c.a.createElement("div",{className:"text-img mb-5"},c.a.createElement("h2",null,"What are the pollutants of main concern to air quality in USA?"),c.a.createElement("img",{src:w.a,alt:"citizens-masks"}),c.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque explicabo aspernatur delectus voluptate, nesciunt quibusdam ab reprehenderit, non et temporibus. Aut commodi, voluptates nulla deleniti pariatur vitae vel eos sit asperiores aliquid, molestiae recusandae placeat corporis earum assumenda dolorem! Earum necessitatibus tempora enim nisi officiis in. Ducimus illo placeat eveniet."),c.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque explicabo aspernatur delectus voluptate, nesciunt quibusdam ab reprehenderit, non et temporibus. Aut commodi, voluptates nulla deleniti pariatur vitae vel eos sit asperiores aliquid, molestiae recusandae placeat corporis earum assumenda dolorem! Earum necessitatibus tempora enim nisi officiis in. Ducimus illo placeat eveniet.")))}var x=a(65);function L(e){var t=e.component,a=Object(x.a)(e,["component"]),n=b().currentUser;return c.a.createElement(P.b,Object.assign({},a,{render:function(e){return n?c.a.createElement(t,e):c.a.createElement(P.a,{to:"/login"})}}))}function U(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),r=b().signup,l=Object(n.useState)(""),o=Object(i.a)(l,2),m=o[0],E=o[1],p=Object(n.useState)(!1),d=Object(i.a)(p,2),_=d[0],f=d[1],A=Object(P.g)();function v(){return(v=Object(u.a)(s.a.mark((function n(c){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),t.current.value===a.current.value){n.next=3;break}return n.abrupt("return",E("Passwords do not match"));case 3:return n.prev=3,E(""),f(!0),n.next=8,r(e.current.value,t.current.value);case 8:A.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),E("Failed to create an account");case 14:f(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,null,c.a.createElement(O.a.Body,null,c.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),m&&c.a.createElement(g.a,{variant:"danger"},m),c.a.createElement(T.a,{onSubmit:function(e){return v.apply(this,arguments)}},c.a.createElement(T.a.Group,{id:"email"},c.a.createElement(T.a.Label,null,"Email"),c.a.createElement(T.a.Control,{type:"email",ref:e,required:!0})),c.a.createElement(T.a.Group,{id:"password"},c.a.createElement(T.a.Label,null,"Password"),c.a.createElement(T.a.Control,{type:"password",ref:t,required:!0})),c.a.createElement(T.a.Group,{id:"password-confirm"},c.a.createElement(T.a.Label,null,"Password Confirmation"),c.a.createElement(T.a.Control,{type:"password",ref:a,required:!0})),c.a.createElement(C.a,{disabled:_,className:"w-100",type:"submit"},"Sign Up")))),c.a.createElement("div",{className:"w-100 text-center mt-2"},"Already have an account? ",c.a.createElement(h.b,{to:"/login"},"Log In")))}var B=a(27),K=a(28),G=a(108),H=a(22),W=a.n(H);var M=function(){var e=Object(n.useState)("Durham"),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useContext)(J).markers,o=-78.898619,m=35.9940329,E=l.map((function(e){return e.lng})),p=l.map((function(e){return e.lat})),d=0!==l.length?E[E.length-1]:o,_=0!==l.length?p[p.length-1]:m;return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(_,",").concat(d,"&sensor=true&key=").concat("AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs"),console.log(t),e.prev=2,e.next=5,W.a.get(t);case 5:a=e.sent,r(a.data.results[0].address_components[3].long_name),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d,_]),a?c.a.createElement("div",{className:"mb-5"},c.a.createElement("h1",null,a)):c.a.createElement("div",null,"Loading indicator")},q=a(36),Y=a(23),F=function(){var e=Object(n.useContext)(J).panTo,t=Object(q.a)({requestOptions:{location:{lat:function(){return 43.6532},lng:function(){return-79.3832}},radius:1e6}}),a=t.ready,r=t.value,l=t.suggestions,o=l.status,i=l.data,m=t.setValue,E=t.clearSuggestions,p=function(){var t=Object(u.a)(s.a.mark((function t(a){var n,c,r,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(a,!1),E(),console.log(a),t.prev=3,t.next=6,Object(q.b)({address:a});case 6:return n=t.sent,t.next=9,Object(q.c)(n[0]);case 9:c=t.sent,r=c.lat,l=c.lng,console.log(n[0].address_components[0].long_name),e({lat:r,lng:l}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),console.log(":scream: Error: ",t.t0);case 19:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"search"},c.a.createElement(Y.a,{onSelect:p},c.a.createElement(Y.b,{className:"form-control mb-3 float-left",value:r,onChange:function(e){m(e.target.value)},disabled:!a,placeholder:"Search your location"}),c.a.createElement(Y.e,null,c.a.createElement(Y.c,null,"OK"===o&&i.map((function(e){var t=e.id,a=e.description;return c.a.createElement(Y.d,{key:t,value:a})}))))))};var z=function(){var e=Object(n.useContext)(J).panTo;return c.a.createElement(C.a,{className:"locate-btn mb-3",onClick:function(){navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(){return null}))}},c.a.createElement("span",{className:"compass-icon"}),"Locate me")},J=(a(99),Object(n.createContext)()),Q=["places"],Z={height:"50vh",width:"100%"},V={disableDefaultUI:!0,zoomControl:!0},X={lat:35.9940329,lng:-78.898619},$=function(e){var t=Object(K.d)({googleMapsApiKey:"AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs",libraries:Q}),a=t.isLoaded,n=t.loadError,r=c.a.useState([]),l=Object(i.a)(r,2),o=l[0],s=l[1],u=c.a.useState(null),m=Object(i.a)(u,2),E=m[0],p=m[1],d=c.a.useState(!1),_=Object(i.a)(d,2),f=_[0],b=_[1],A=c.a.useCallback((function(e){s((function(t){return[].concat(Object(B.a)(t),[{lat:e.latLng.lat(),lng:e.latLng.lng(),time:new Date}])})),console.log(e.latLng.lat())}),[]),P=c.a.useRef(),h=c.a.useCallback((function(e){P.current=e}),[]),v=c.a.useCallback((function(e){var t=e.lat,a=e.lng;P.current.panTo({lat:t,lng:a}),P.current.setZoom(14),s((function(e){return[].concat(Object(B.a)(e),[{lat:t,lng:a,time:new Date}])}))}),[]);if(n)return"Error";if(!a)return"Loading...";var O=o.map((function(e){return e.lng})),g=o.map((function(e){return e.lat})),T=O[O.length-1],S=g[g.length-1];return c.a.createElement(J.Provider,{value:{markers:o,longitude:T,latitude:S,panTo:v}},c.a.createElement(I.a,null,c.a.createElement(M,null),e.children,c.a.createElement("div",{style:{display:f?"block":"none"}},c.a.createElement(z,{panTo:v}),c.a.createElement(F,{panTo:v}),c.a.createElement(K.a,{id:"map",mapContainerStyle:Z,zoom:8,center:X,options:V,onClick:A,onLoad:h,render:{}},o.map((function(e){return c.a.createElement(K.c,{key:"".concat(e.lat,"-").concat(e.lng),position:{lat:e.lat,lng:e.lng},onClick:function(){p(e)},icon:{url:"/bear.svg",origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(15,15),scaledSize:new window.google.maps.Size(30,30)}})})),E?c.a.createElement(K.b,{position:{lat:E.lat,lng:E.lng},onCloseClick:function(){p(null)}},c.a.createElement("div",null,c.a.createElement(M,{className:"infowindow h6"}),c.a.createElement("div",null),c.a.createElement("p",null,Object(G.a)(E.time,new Date)))):null)),c.a.createElement(C.a,{variant:"primary",className:"btn-lg mb-5",onClick:function(){return b(!f)}},f?"Hide Map":"Pick Location")))},ee=Object(n.createContext)(),te=function(e){var t=e.location.map((function(e){return e.lon})),a=t[t.length-1];return console.log(a),c.a.createElement(ee.Provider,{value:{locationListLon:a}},c.a.createElement("section",{className:"location-list list-group mb-3 mt-3"},c.a.createElement("h4",{className:"locations-title mb-3"},"My Locations"),c.a.createElement("ul",null,e.location.map((function(t){return c.a.createElement("li",{key:t.id,className:"d-flex list-group-item list-group-item-action"},c.a.createElement("a",{className:"custom-tooltip",onClick:function(){return console.log(t)}},t.place,c.a.createElement("span",{className:"tooltiptext"},"Click to see Air Data for ",t.place)),c.a.createElement("span",{className:"d-none"},t.lon),c.a.createElement("span",{className:"d-none"},t.lat),c.a.createElement("span",{onClick:e.onRemoveItem.bind(void 0,t.id),className:"delete-icon"}))})))))},ae=a(107);var ne=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useContext)(J).markers,o=50,m=55,E=l.map((function(e){return e.lng})),p=l.map((function(e){return e.lat})),d=0!==l.length?E[E.length-1]:o,_=0!==l.length?p[p.length-1]:m;return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="http://api.openweathermap.org/data/2.5/air_pollution?lat=".concat(_,"&lon=").concat(d,"&appid=").concat("8fd8cd4cfceeb698eef7a7cd4ea325cc"),console.log(t),e.prev=2,e.next=5,W.a.get(t);case 5:a=e.sent,r(a.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d,_]),a?c.a.createElement("div",{className:"mb-3"},c.a.createElement("h2",{className:"mb-4"},"Current Air Data ",c.a.createElement("strong",{className:"float-right aqi"},"AQI: ",a.list[0].main.aqi," ",c.a.createElement("small",null))),c.a.createElement(ae.a,{responsive:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"CO"),c.a.createElement("th",null,"NO"),c.a.createElement("th",null,"NO",c.a.createElement("span",null,"2")),c.a.createElement("th",null,"O",c.a.createElement("span",null,"3")),c.a.createElement("th",null,"SO",c.a.createElement("span",null,"2")),c.a.createElement("th",null,"PM",c.a.createElement("span",null,"2_5")),c.a.createElement("th",null,"PM",c.a.createElement("span",null,"10")),c.a.createElement("th",null,"NH",c.a.createElement("span",null,"3")))),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,a.list[0].components.co),c.a.createElement("td",null,a.list[0].components.no),c.a.createElement("td",null,a.list[0].components.no2),c.a.createElement("td",null,a.list[0].components.o3),c.a.createElement("td",null,a.list[0].components.so2),c.a.createElement("td",null,a.list[0].components.pm2_5),c.a.createElement("td",null,a.list[0].components.pm10),c.a.createElement("td",null,a.list[0].components.nh3)))),c.a.createElement("small",{className:"table-units text-right"},c.a.createElement("div",null,"AIR QUALITY INDEX "),c.a.createElement("div",null,"1 - very good"),c.a.createElement("div",null,"5 - poor"),c.a.createElement("div",null,"mg/m",c.a.createElement("sup",null,"3")))):c.a.createElement("div",null,"Loading indicator")},ce=a(64),re=a.n(ce);var le=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useContext)(J).markers,o=-78.898619,m=35.9940329,E=["Sunday","Monday","Tuesday","Wendesday","Thursday","Friday","Saturday"],p=function(e){return"".concat(e,"_").concat(1e3*Math.random())},d=l.map((function(e){return e.lng})),_=l.map((function(e){return e.lat})),f=0!==l.length?d[d.length-1]:o,b=0!==l.length?_[_.length-1]:m;return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t){return e.filter((function(e,a){return a%t===t-1}))},a="http://api.openweathermap.org/data/2.5/air_pollution/forecast?lat=".concat(b,"&lon=").concat(f,"&appid=").concat("8fd8cd4cfceeb698eef7a7cd4ea325cc"),console.log(a),e.prev=3,e.next=6,W.a.get(a);case 6:n=e.sent,c=n.data.list,r(t(c,24).splice(2)),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f,b]),a?c.a.createElement("div",{className:"mb-5"},c.a.createElement("h3",{className:"mb-3"},"5 Day Forecast"),c.a.createElement(ae.a,{responsive:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Day"),c.a.createElement("th",null,"CO"),c.a.createElement("th",null,"NO"),c.a.createElement("th",null,"NO",c.a.createElement("span",null,"2")),c.a.createElement("th",null,"O",c.a.createElement("span",null,"3")),c.a.createElement("th",null,"SO",c.a.createElement("span",null,"2")),c.a.createElement("th",null,"PM",c.a.createElement("span",null,"2.5")),c.a.createElement("th",null,"PM",c.a.createElement("span",null,"10")),c.a.createElement("th",null,"NH",c.a.createElement("span",null,"3")))),c.a.createElement("tbody",null,a.map((function(e,t){return c.a.createElement("tr",null,c.a.createElement("td",{key:p(t)},E[new Date(1e3*e.dt).getDay()]),c.a.createElement("td",{key:p(e.components.co)},e.components.co),c.a.createElement("td",{key:p(e.components.no)},e.components.no),c.a.createElement("td",{key:p(e.components.no2)},e.components.no2),c.a.createElement("td",{key:p(e.components.o3)},e.components.o3),c.a.createElement("td",{key:p(e.components.so2)},e.components.so2),c.a.createElement("td",{key:p(e.components.pm2_5)},e.components.pm2_5),c.a.createElement("td",{key:p(e.components.pm10)},e.components.pm10),c.a.createElement("td",{key:p(e.components.nh3)},e.components.nh3))}))))):c.a.createElement(re.a,{type:"spin",color:"#59A9FF",className:"mx-auto"})},oe=a(66),se=c.a.memo((function(e){var t=e.onLoadLocations;return Object(n.useEffect)((function(){var e=setTimeout((function(){fetch("https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com/locations.json").then((function(e){return e.json()})).then((function(e){var a=[];for(var n in e)a.push({id:n,lon:e[n].lon,lat:e[n].lat,place:e[n].place});t(a)}))}),500);return function(){clearTimeout(e)}}),t),c.a.createElement("section",{className:"search search-input-filter"},c.a.createElement(O.a,null,c.a.createElement("div",{className:"search-input-filter"})))})),ue=function(){var e=Object(n.useContext)(J),t=e.longitude,a=e.latitude,r=Object(n.useState)(!1),l=Object(i.a)(r,2),o=(l[0],l[1]),m=Object(n.useState)(),E=Object(i.a)(m,2),p=(E[0],E[1]),d=Object(n.useState)([]),_=Object(i.a)(d,2),f=_[0],b=_[1],A=function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,h(a,t).then((function(e){O({lon:t,lat:a,place:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){}),[f]);var P=Object(n.useCallback)((function(e){b(e)}),[]);function h(e,t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(s.a.mark((function e(t,a){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(t,",").concat(a,"&sensor=true&key=").concat("AIzaSyD1n5_7cCRn9WnZkNbpH0I8kE5lYgBIgTs"));case 3:return n=e.sent,e.next=6,n.json();case 6:if(c=e.sent,console.log(c),!(c.results.length>0)){e.next=14;break}return console.log("ima nesto!!!"),console.log(c.results[0].address_components[3].long_name),e.abrupt("return",c.results[0].address_components[3].long_name);case 14:return console.log("NEMA NISTA!!!!"),e.abrupt("return","Unknown Location");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}var O=function(e){fetch("https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com/locations.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),b((function(a){return[].concat(Object(B.a)(a),[Object(oe.a)({id:t.name},e)])}))}))};return c.a.createElement("div",{className:"add-location"},c.a.createElement("section",null,c.a.createElement(se,{onLoadLocations:P}),c.a.createElement(te,{location:f,onRemoveItem:function(e){o(!0),fetch("https://auth-hooks-dev-3ac29-default-rtdb.firebaseio.com/locations/".concat(e,".json"),{method:"DELETE"}).then((function(t){o(!1),b((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){p("Something went wrong!"),o(!1)}))}}),c.a.createElement("div",{className:"Location-form__actions"},c.a.createElement("form",{onSubmit:A},c.a.createElement(C.a,{type:"submit",className:"mb-5"},"Save Location")))))},ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(n.useState)((function(){return t})),c=Object(i.a)(a,2),r=c[0],l=c[1];return[r?e:null,function(){return l((function(e){return!e}))}]},me=function(){var e=ie(c.a.createElement(le,null),!1),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1];return c.a.createElement($,null,c.a.createElement(ne,null),a,c.a.createElement(C.a,{variant:"outline-primary",className:"btn-lg mb-5 mx-auto",onClick:function(){r(),u(!s)}},s?"Hide Forecast":"Show Forecast"),c.a.createElement(ue,null))};function Ee(){return c.a.createElement(h.a,null,c.a.createElement(h.a,null,c.a.createElement(A,null,c.a.createElement("div",{className:"App"},c.a.createElement(v,null)),c.a.createElement(P.d,null,c.a.createElement(L,{exact:!0,path:"/",component:me}),c.a.createElement(P.b,{path:"/posts",component:y}),c.a.createElement(L,{path:"/update-profile",component:S}),c.a.createElement(P.b,{exact:!0,path:"/login",component:k}),c.a.createElement(P.b,{path:"/signup",component:U}),c.a.createElement(P.b,{path:"/forgot-password",component:R})))))}a(100),a(101);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ee,null)),document.getElementById("root"))},61:function(e,t,a){e.exports=a.p+"static/media/citizens_masks.a01c83bc.jpg"},62:function(e,t,a){e.exports=a.p+"static/media/fabrics.d5ddfdd7.jpg"},67:function(e,t,a){e.exports=a(102)}},[[67,1,2]]]);
//# sourceMappingURL=main.2d4063a8.chunk.js.map